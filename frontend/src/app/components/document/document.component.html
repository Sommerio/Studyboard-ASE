<div *ngIf="success" class="alert alert-success alert-dismissible fade show" role="alert">
  <strong>{{successMessage}}</strong> {{ errorMessage }}
  <button type="button" (click)="vanishSuccessMessage()" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

<mat-nav-list *ngFor="let doc of getAllDocuments()">
  <mat-list-item>
    <mat-card-content style="height: 25px; width: 100%">
      <mat-card-title>
        <h3 class="document-name">
          {{doc.name}}
        </h3>
        <span class="close" (click)="loadFile(doc)" data-target=".view-document-modal" data-toggle="modal">
          <mat-icon>play_arrow</mat-icon>
        </span>
        <span class="close" (click)="deleteDocument(doc)" style="float: right">
          <mat-icon>delete</mat-icon>
        </span>
        <span class="close" (click)="downloadFileFromList(doc)" style="float: right">
          <mat-icon>save_alt</mat-icon>
        </span>
        <!--Video modal-->
        <div *ngIf="currentDocument && currentDocument.name.includes('.mp4')" aria-hidden="true" aria-labelledby="View document modal"
             class="modal fade view-document-modal"  role="dialog" data-backdrop='static' data-keyboard='false'
             tabindex="-1">
          <div class="modal-dialog modal-xl">
            <div class="modal-content">
              <div class="modal-header">
                <h2 class="modal-title">{{this.currentDocument.name}}</h2>
                <button (click)="modalCloseCleanUp()" aria-label="Close" class="close" data-dismiss="modal" type="button">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">

                <vm-player #player playsinline>
                  <vm-video cross-origin="true">
                    <source [attr.data-src]="blobUrl" type="video/mp4" />
                  </vm-video>

                  <vm-default-ui>
                    <!-- Custom UI component. -->
                  </vm-default-ui>
                </vm-player>
              </div>
              <div class="modal-body">
                <h2>Transcription</h2>
                <p>{{this.currentDocument.transcription}}</p>
              </div>
              <div class="modal-footer">
                <button (click)="modalCloseCleanUp()" data-dismiss="modal" mat-button mat-dialog-actions type="button">Close</button>
              </div>
            </div>
          </div>
        </div>

        <!--Audio modal-->
        <div *ngIf="currentDocument && currentDocument.name.includes('.mp3')" aria-hidden="true" aria-labelledby="View document modal"
             class="modal fade view-document-modal"  role="dialog" data-backdrop='static' data-keyboard='false'
             tabindex="-1">
          <div class="modal-dialog modal-xl">
            <div class="modal-content">
              <div class="modal-header">
                <h2 class="modal-title">{{this.currentDocument.name}}</h2>
                <button (click)="modalCloseCleanUp()" aria-label="Close" class="close" data-dismiss="modal" type="button">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">

                <vm-player #audioPlayer controls>
                  <vm-audio>
                    <source [attr.data-src]="blobUrl" type="audio/mp3" />
                  </vm-audio>
                </vm-player>
              </div>
              <div class="modal-body">
                <h2>Transcription</h2>
                <p>{{this.currentDocument.transcription}}</p>
              </div>
              <div class="modal-footer">
                <button (click)="modalCloseCleanUp()" data-dismiss="modal" mat-button mat-dialog-actions type="button">Close</button>
              </div>
            </div>
          </div>
        </div>

        <!--Image modal-->
        <div *ngIf="currentDocument && (currentDocument.name.includes('.png') || currentDocument.name.includes('.jpeg'))" aria-hidden="true"
             aria-labelledby="View image modal" class="modal fade view-document-modal"  role="dialog" data-backdrop='static'
             data-keyboard='false' tabindex="-1">
          <div class="modal-dialog modal-xl">
            <div class="modal-content">
              <div class="modal-header">
                <h2 class="modal-title">{{this.currentDocument.name}}</h2>
                <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <img class="unselectable" [attr.src]="blobUrl" width="100%" height="100%" alt="Image"/>
              </div>
              <div class="modal-footer">
                <button data-dismiss="modal" mat-button mat-dialog-actions type="button">Close</button>
              </div>
            </div>
          </div>
        </div>

        <!--PDF modal-->
        <div *ngIf="currentDocument && (currentDocument.name.includes('.pdf'))" aria-hidden="true"
             aria-labelledby="View image modal" class="modal fade view-document-modal"  role="dialog" data-backdrop='static'
             data-keyboard='false' tabindex="-1">
          <div class="modal-dialog modal-xl">
            <div class="modal-content">
              <div class="modal-header">
                <h2 class="modal-title">{{this.currentDocument.name}}</h2>
                <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <pdf-viewer [src]="blobUrl"
                            [render-text]="true"
                            style="display: block;"
                ></pdf-viewer>
              </div>
              <div class="modal-footer">
                <button data-dismiss="modal" mat-button mat-dialog-actions type="button">Close</button>
              </div>
            </div>
          </div>
        </div>
      </mat-card-title>
    </mat-card-content>
  </mat-list-item>
</mat-nav-list>

<div class="warningMessageContainer" *ngIf="isEmpty()">
  <h3 class="warningMessage">There are no documents in this space!</h3>
</div>

